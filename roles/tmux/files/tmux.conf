#      _                                          __
#     | |_ _ __ ___  _   ___  __  ___ ___  _ __  / _|
#     | __| '_ ` _ \| | | \ \/ / / __/ _ \| '_ \| |_
#     | |_| | | | | | |_| |>  < | (_| (_) | | | |  _|
#    (_)__|_| |_| |_|\__,_/_/\_(_)___\___/|_| |_|_|
#

# Status Line setting -----------------
# 区切り記号
S_LEFT_BOLD=""
S_LEFT_THIN=""
S_RIGHT_BOLD=""
S_RIGHT_THIN=""
# ベースとなるfg, bgのcolor
set -g status-fg colour240
set -g status-bg colour236

set-option -g status on
# ステータスラインをトップに配置する
set-option -g status-position top
# ステータスラインを1秒毎に描画し直す
set-option -g status-interval 1
# 左右のステータスラインの長さを決定する
set-option -g status-left-length 70
set-option -g status-right-length 90

# Left side: Host name, LA, Mem
set -g status-left "\
#{?client_prefix,#[fg=colour232]#[bg=colour170],#[fg=colour232]#[bg=colour245]} #S \
#{?client_prefix,#[fg=colour170]#[bg=colour28],#[fg=colour245]#[bg=colour28]}${S_RIGHT_BOLD}\
#[fg=colour15,bg=colour28] #{cpu} \
#[fg=colour28,bg=colour22]${S_RIGHT_BOLD}\
#[fg=colour15,bg=colour22] #{mem} \
#[fg=colour22,bg=colour235]${S_RIGHT_BOLD}"

# Right side: Wi-Fi, date
set -g status-right "\
#[fg=colour25,bg=colour235]${S_LEFT_BOLD}\
#[fg=colour15,bg=colour25] #(~/dotfiles/roles/tmux/files/getwifi)\
#[fg=colour136,bg=colour25]${S_LEFT_BOLD}\
#[fg=colour15,bg=colour136] %Y-%m-%d(%a) ${S_LEFT_THIN} %H:%M:%S #[default]"

# Center
set-option -g status-justify "centre"

set-window-option -g window-status-format "\
#[fg=colour235, bg=colour240]${S_RIGHT_BOLD}\
#[fg=colour245, bg=colour240] #I ${S_RIGHT_THIN} #W \
#[fg=colour240, bg=colour235]${S_RIGHT_BOLD}"

set-window-option -g window-status-current-format "\
#[fg=colour235, bg=colour170]${S_RIGHT_BOLD}\
#[fg=colour15, bg=colour170] #I ${S_RIGHT_THIN} #W \
#[fg=colour170, bg=colour235]${S_RIGHT_BOLD}"

# Require settings --------------------
# Esc入力時のディレイを減らす
set -s escape-time 0
# Esc入力時の待ち時間をキャンセル
set-option -s escape-time 0
# 256色端末を使用する
set -g default-terminal "screen-256color"
# ウィンドウ履歴の最大行数
set-option -g history-limit 10000
# キーストロークのディレイを減らす
set -g base-index 1
# ペインのインデックスを1から始める
setw -g pane-base-index 1

# Key bind settings -------------------
# C-rで.tmux.confを再読み込みする
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"
# C-^でペインを縦に分割する
bind ^ split-window -h
# C-- でペインを縦に分割する
bind - split-window -v
# Alt + 十字キーでペインのサイズを変更
# (OSX ターミナル.appの場合はAltをmeta keyとして認識する設定が必要)
bind-key -n M-Up resize-pane -U 5
bind-key -n M-Down resize-pane -D 5
bind-key -n M-Left resize-pane -L 5
bind-key -n M-Right resize-pane -R 5

# Mouse setting -----------------------
# require tmux version grater then 2.1.
set -g mouse on
bind -n WheelUpPane   select-pane -t= \; copy-mode -e \; send-keys -M
bind -n WheelDownPane select-pane -t= \;                 send-keys -M

# Copy to Clipboard -------------------
# Update default binding of `Enter` to also use copy-pipe
unbind-key -T copy-mode-vi Enter
# Use vim keybindings in copy mode
setw -g mode-keys vi
set-option -g default-command "reattach-to-user-namespace -l $SHELL"
# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# tmux plugin -------------------------
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# tmux resurrect
set -g @plugin 'tmux-plugins/tmux-resurrect'
# URL open
set -g @plugin 'tmux-plugins/tmux-urlview'
# Display Local PC memory, Load Average
set -g @plugin 'knakayama/tmux-mem'
set -g @plugin 'knakayama/tmux-cpu'

run -b '~/.tmux/plugins/tpm/tpm'
