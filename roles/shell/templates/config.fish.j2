#
#       __ _     _
#      / _(_)___| |__
#     | |_| / __| '_ \
#     |  _| \__ \ | | |
#     |_| |_|___/_| |_|
#

# Export path
# asdf path
source (brew --prefix asdf)/libexec/asdf.fish
set -x ASDF_DIR /usr/local/opt/asdf/libexec
set -x PATH $PATH $HOME/.asdf/shims

# Go path
set -x GOPATH $HOME/go
set -x PATH $PATH $GOPATH/bin

# Homebrew path
# set -x PATH $PATH /opt/homebrew/bin

# Editors path
{% if VIM == "neovim" %}
set -U EDITOR (brew --prefix)/bin/nvim
{% else %}
set -U EDITOR (brew --prefix)/bin/vim
{% endif %}
set -U PAGER /usr/bin/less

# Set history
set -U HISTSIZE 10000
set -U SAVEHIST 100000

# Set theme
set -U TERM xterm-256color

# Set fzf
set -x FZF_DEFAULT_COMMAND 'rg --files --hidden --glob "!.git"'
set -x FZF_DEFAULT_OPTS '--no-sort --exact --cycle --exit-0 --select-1 --multi --ansi --height 70% --reverse --border --prompt=">>> " --bind=ctrl-j:preview-down --bind=ctrl-k:preview-up'

# Set tmux
set -x TMUX_TMPDIR "$HOME/.tmux/tmp/"

# Alias
# exa command
if type -q exa
    alias ls "exa --long --git --icons"
    alias ll "exa --long --git --icons --all"
    alias tree "exa --long --git --icons --all --tree"
else
    alias ls "gls --color=auto -F"
    alias ll "gls -aFGlh"
end

# bat command
if type -q bat
    alias cat "bat --wrap auto --theme=Coldark-Dark --paging=never"
end

# Git
alias g "git"
alias gcd "cd (git rev-parse --show-toplevel)"
alias gs "git status"
alias gd "git diff"
alias gdv "git difftool --tool=vimdiff --no-prompt"
alias gp "git pull"
alias gg "git grep"
alias glg "git log --graph --branches --remotes --color=always --pretty='%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'"
alias gc "git checkout"

# Docker
alias d "docker"
alias di "docker images"
alias dp "docker ps"
alias dka "docker kill (docker ps -q)"
alias dcp "docker container prune -f"
alias dsa "docker stop (docker ps -q)"

# Docker compose
alias dcomp "docker compose"

# Editor
{% if VIM == "neovim" %}
alias v (brew --prefix)/bin/nvim
alias vim (brew --prefix)/bin/nvim
{% else %}
alias v (brew --prefix)/bin/vim
alias vim (brew --prefix)/bin/vim
{% endif %}

# Terraform
alias tf "terraform"

# Kubectl
alias k "kubectl"

# Make
alias m "make"

# ranger
alias r "ranger"

# Set key binding
bind \cx change_recent_directory

# Init starship
starship init fish | source

# Define direnv
if type -q direnv
    eval (direnv hook fish)
end
