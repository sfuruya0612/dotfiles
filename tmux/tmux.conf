#      _                                          __
#     | |_ _ __ ___  _   ___  __  ___ ___  _ __  / _|
#     | __| '_ ` _ \| | | \ \/ / / __/ _ \| '_ \| |_
#     | |_| | | | | | |_| |>  < | (_| (_) | | | |  _|
#    (_)__|_| |_| |_|\__,_/_/\_(_)___\___/|_| |_|_|
#

#########################################################
# Colours
#########################################################
# default statusbar
set-option -g status-style fg=colour208,bg=colour236
# window title on statusbar
set-window-option -g window-status-style fg=colour246,bg=colour236
set-window-option -g window-status-current-style fg=colour196,bg=colour236
# window colour
set-window-option -g window-active-style fg=default,bg=default
set-window-option -g window-style fg=default,bg=default
# pane border
set-option -g pane-border-style fg=colour246
set-option -g pane-active-border-style fg=colour196
# message text
set-option -g message-style fg=colour196,bg=colour236,
# pane number display
set-option -g display-panes-active-colour colour22
set-option -g display-panes-colour colour196

#########################################################
# Settings
#########################################################
# Require settings --------------------
# Esc入力時のディレイを減らす
set -s escape-time 0
# Esc入力時の待ち時間をキャンセル
set-option -s escape-time 0
# 256色端末を使用する
set -g default-terminal "screen-256color"
# ウィンドウ履歴の最大行数
set-option -g history-limit 10000
# キーストロークのディレイを減らす
set -g base-index 1
# ペインのインデックスを1から始める
setw -g pane-base-index 1

# Key bind settings -------------------
# C-rで.tmux.confを再読み込みする
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"
# C-^でペインを縦に分割する
bind ^ split-window -h
# C-- でペインを縦に分割する
bind - split-window -v
# Alt + 十字キーでペインのサイズを変更
# (OSX ターミナル.appの場合はAltをmeta keyとして認識する設定が必要)
bind-key -n M-Up resize-pane -U 5
bind-key -n M-Down resize-pane -D 5
bind-key -n M-Left resize-pane -L 5
bind-key -n M-Right resize-pane -R 5

# Mouse setting -----------------------
# require tmux version grater then 2.1.
set -g mouse on
bind -n WheelUpPane   select-pane -t= \; copy-mode -e \; send-keys -M
bind -n WheelDownPane select-pane -t= \;                 send-keys -M

# Copy Mode setting -------------------
# "["でコピーモードに移り、v or spaceでコピー開始、y or enterでクリップボードに保存
set-option -g default-command "exec reattach-to-user-namespace -l $SHELL"
setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# Status Line setting -----------------
# ステータスラインをトップに配置する
set-option -g status-position top
# ステータスラインを1秒毎に描画し直す
set-option -g status-interval 1
# 左右のステータスラインの長さを決定する
set-option -g status-left-length 90
set-option -g status-right-length 200
# Left side: Host name, pane NO
set-option -g status-left "#[fg=colour208]#{?client_prefix,#[fg=black]#[bg=yellow],} LOCAL:[#[fg=colour77]#{mem} #[fg=colour208]| #[fg=colour77]#{cpu}#[fg=colour208]]"
# Rigth side: Wi-Fi, date
set-option -g status-right "#[fg=colour208][#[fg=colour77]#(~/dotfiles/tmux/getwifi)#[fg=colour208]]#[fg=colour208][%Y-%m-%d(%a)%H:%M:%S]"
# センタライズ（主にウィンドウ番号など）
set-option -g status-justify centre

# tmux plugin -------------------------
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# tmux resurrect
set -g @resurrect-save 'S'
set -g @resurrect-restore 'R'
# Display Local PC memory & Load Average
set -g @plugin 'knakayama/tmux-mem'
set -g @plugin 'knakayama/tmux-cpu'

run -b '~/.tmux/plugins/tpm/tpm'
